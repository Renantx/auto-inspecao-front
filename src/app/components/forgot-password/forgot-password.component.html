<div class="forgot-password-container">
  <div class="forgot-password-card">
    <header class="forgot-password-header">
      <div class="pharmacy-symbol" aria-hidden="true">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round">
          <line x1="12" y1="2" x2="12" y2="22"/>
          <line x1="2" y1="12" x2="22" y2="12"/>
          <rect x="6" y="6" width="12" height="12" rx="2" stroke-width="1.5"/>
        </svg>
      </div>
      <h1>Recuperar Senha</h1>
      <p class="subtitle">Digite seu email para receber instruções</p>
    </header>

    <div *ngIf="!emailSent" class="forgot-password-form-container">
      <form [formGroup]="forgotPasswordForm" (ngSubmit)="onSubmit()" class="forgot-password-form">
        <div class="form-group">
          <label for="email">
            <span class="label-icon">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
                <polyline points="22,6 12,13 2,6"/>
              </svg>
            </span>
            Email
          </label>
          <input
            type="email"
            id="email"
            formControlName="email"
            placeholder="seu@email.com"
            class="form-control"
            [class.error]="email?.invalid && email?.touched"
            autocomplete="email"
          />
          <div class="error-message" *ngIf="email?.invalid && email?.touched">
            <span *ngIf="email?.errors?.['required']">Email é obrigatório</span>
            <span *ngIf="email?.errors?.['email']">Email inválido</span>
          </div>
        </div>

        <div class="error-message server-error" *ngIf="errorMessage">
          {{ errorMessage }}
        </div>

        <button
          type="submit"
          class="btn-submit"
          [disabled]="isLoading || forgotPasswordForm.invalid"
        >
          <span *ngIf="!isLoading">Enviar Instruções</span>
          <span *ngIf="isLoading" class="loading">
            <svg class="spinner" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10" stroke-opacity="0.25"/>
              <path d="M12 2a10 10 0 0 1 10 10" stroke-linecap="round"/>
            </svg>
            Enviando...
          </span>
        </button>
      </form>
    </div>

    <div *ngIf="emailSent" class="success-container">
      <div class="success-icon">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
          <polyline points="22 4 12 14.01 9 11.01"/>
        </svg>
      </div>
      <h2>Email Enviado!</h2>
      <p class="success-message">{{ successMessage }}</p>
      <p class="success-info">Verifique sua caixa de entrada e siga as instruções para redefinir sua senha.</p>
      <button
        type="button"
        class="btn-back"
        (click)="backToLogin()"
      >
        Voltar para Login
      </button>
    </div>

    <footer class="forgot-password-footer">
      <a (click)="backToLogin()" class="back-link">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M19 12H5M12 19l-7-7 7-7"/>
        </svg>
        Voltar para Login
      </a>
    </footer>
  </div>
</div>
