<div class="login-container">
  <div class="login-card">
    <header class="login-header">
      <div class="pharmacy-symbol" aria-hidden="true">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round">
          <line x1="12" y1="2" x2="12" y2="22"/>
          <line x1="2" y1="12" x2="22" y2="12"/>
          <rect x="6" y="6" width="12" height="12" rx="2" stroke-width="1.5"/>
        </svg>
      </div>
      <h1>Auto-Inspeção</h1>
      <p class="subtitle">Farmácia de Manipulação</p>
    </header>

    <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" class="login-form">
      <div class="form-group">
        <label for="usuario">
          <span class="label-icon">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
              <circle cx="12" cy="7" r="4"/>
            </svg>
          </span>
          CPF
        </label>
        <input
          type="text"
          id="usuario"
          formControlName="usuario"
          placeholder="000.000.000-00"
          class="form-control"
          [class.error]="usuario?.invalid && usuario?.touched"
          autocomplete="username"
          maxlength="14"
        />
        <div class="error-message" *ngIf="usuario?.invalid && usuario?.touched">
          <span *ngIf="usuario?.errors?.['required']">CPF é obrigatório</span>
        </div>
      </div>

      <div class="form-group">
        <label for="senha">
          <span class="label-icon">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
              <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
            </svg>
          </span>
          Senha
        </label>
        <input
          type="password"
          id="senha"
          formControlName="senha"
          placeholder="Digite sua senha"
          class="form-control"
          [class.error]="senha?.invalid && senha?.touched"
          autocomplete="current-password"
        />
        <div class="error-message" *ngIf="senha?.invalid && senha?.touched">
          <span *ngIf="senha?.errors?.['required']">Senha é obrigatória</span>
        </div>
      </div>

      <div class="error-message server-error" *ngIf="errorMessage">
        {{ errorMessage }}
      </div>

      <button
        type="submit"
        class="btn-login"
        [disabled]="isLoading || loginForm.invalid"
      >
        <span *ngIf="!isLoading">Entrar</span>
        <span *ngIf="isLoading" class="loading">
          <svg class="spinner" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10" stroke-opacity="0.25"/>
            <path d="M12 2a10 10 0 0 1 10 10" stroke-linecap="round"/>
          </svg>
          Entrando...
        </span>
      </button>

      <div class="forgot-password-link">
        <a routerLink="/recuperar-senha">Esqueci minha senha</a>
      </div>
    </form>

    <footer class="login-footer">
      <p>Roteiro de Inspeção conforme RDC 67/2007 - ANVISA</p>
    </footer>
  </div>
</div>
